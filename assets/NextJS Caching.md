
# Caching in Next.js

## 1. Request Memoization
Request memoization caches expensive function results to enhance performance by avoiding repeated calculations for the same inputs, especially useful in applications with frequent data requests.


- **Functionality**: React memoizes fetch requests with the same URL and options, allowing data to be fetched only once per render pass.
- **Cache Behavior**:
  - **Cache MISS**: On the first call, data is fetched from the source.
  - **Cache HIT**: Subsequent calls return cached data without fetching.
- **Lifetime**: Memoization lasts only for the duration of the server request, resetting after rendering.

## 2. Data Cache in Next.js
- **Extended Fetch API**: Next.js introduces a `next` property to configure caching behavior (e.g., revalidation).
- **Cache Handling**:
  - Cached responses are checked during rendering; if found, they are used immediately.
  - Uncached data is fetched and stored, avoiding duplicate requests.
- **Differences**:
  - **Request Memoization**: Temporary, only for the component tree.
  - **Data Cache**: A persistent data cache retains information across user requests and application deployments, enhancing performance

### Duration
- **Request Memoization**: Lasts only for the rendering of the current server request.
- **Data Cache**: Persistent across incoming requests and deployments until revalidated or opted out.

## 3. Revalidation
- **Methods**:
  - **Time-based**: Automatically revalidates data after a specified interval.
  - **On-demand**: Revalidates based on specific events (e.g., content updates).

### Example Code for Revalidation
#### Time-based Revalidation
To revalidate data every hour, you can use:
```javascript
fetch('https://api.example.com/data', { next: { revalidate: 3600 } });
```

#### On-demand Revalidation
You can trigger revalidation for a specific path:
```javascript
await revalidatePath('/path');
```

## 4. Opting Out of Caching
- Use `AbortController` or set cache to `'no-store'` to bypass caching for specific requests or routes:
```javascript
const { signal } = new AbortController();
fetch(url, { signal });
```
Or:
```javascript
fetch('https://api.example.com/data', { cache: 'no-store' });
```

## 5. Full Route Cache
- **Definition**: Caches entire HTML pages generated by Next.js (SSG/SSR).
- **Benefits**: Improves performance by serving cached pages without regenerating on each request.

## Key Differences
- **Full Route Cache**: Caches complete rendered pages, ideal for static content.
- **Data Cache**: Caches raw API data for efficient data fetching.

